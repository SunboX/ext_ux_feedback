{"ts":1378727756491,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<?php\n\nsession_start();\n\n$dir = dirname(__FILE__) . '/data/';\n$filename = session_id() . time() . '.jpg';\n\n// delete old screenshots\n$handle = opendir($dir);\nif($handle) {\n    // read directory contents\n    while(false !== ($file = readdir($handle))) {\n        // check the create time of each file (older than 1 hour)\n        if($file !== '.' && $file !== '..' && filemtime($dir . $file) < time() - 3600) {\n            unlink($dir . $file);\n        }\n    }\n}\n     \n$data = '';\n\n$feedback  = 'Server Date/Time: ' . date('Y-m-d - H:i:s') . ' (start building eMail - server)' . \"\\n\\n\";\n$feedback .= 'Client Date/Time: ' . date('Y-m-d - H:i:s', strtotime($_POST['datetime'])) . ' (start sending feedback - client)' . \"\\n\\n\";\n$feedback .= 'Client Browser: ' . $_POST['useragent'] . \"\\n\\n\";\n$feedback .= 'Client OS: ' . $_POST['platform'] . \"\\n\\n\";\n\n$feedback .= 'Feedback: ' . \"\\n\\n\" . $_POST['feedback'];\n\nif(isset($_POST['screenshot'])){\n    $data = base64_decode(preg_replace('/^data:image\\/jpeg;base64,/', '', $_POST['screenshot']));\n}\n\n// attach ScreenShot\nfile_put_contents($dir . $filename, $data);\n\n$_SESSION['screenshot'] = $filename;\n$_SESSION['feedback'] = $feedback;\n\n\necho json_encode(array(\n    'success' => true,\n    'msg'     => ''\n));\n\n?>\n"]],"start1":0,"start2":0,"length1":0,"length2":1252}]],"length":1252}
