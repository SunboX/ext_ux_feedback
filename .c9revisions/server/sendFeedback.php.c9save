{"ts":1342035474698,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<?php\n\nrequire_once dirname(__FILE__) . '/../lib/swift_mailer/swift_required.php';\n\n$data = null;\n\n$feedback  = 'Server Datum/Zeit: ' . date('d.m.Y - H:i:s') . ' (Beginn Zusammenstellung E-Mail - Server)' . \"\\n\\n\";\n$feedback .= 'Client Datum/Zeit: ' . date('d.m.Y - H:i:s', strtotime($_POST['datetime'])) . ' (Beginn Feedback-Versand - Client)' . \"\\n\\n\";\n$feedback .= 'Client Browser: ' . $_POST['useragent'] . \"\\n\\n\";\n$feedback .= 'Client Betriebssystem: ' . $_POST['platform'] . \"\\n\\n\";\n\n$feedback .= 'Feedback: ' . \"\\n\\n\" . $_POST['feedback'];\n\nif(isset($_POST['screenshot'])){\n    $data = base64_decode(preg_replace('/^data:image\\/jpeg;base64,/', '', $_POST['screenshot']));\n}\n\n// Create the message\n$message = Swift_Message::newInstance()\n    \n    // Give the message a subject\n    ->setSubject('Feedback from Demo App')\n    \n    // Set the From address with an associative array\n    ->setFrom(array('--EMAIL--' => 'Demo App'))\n    \n    // Set the To addresses with an associative array\n    ->setTo(array('--EMAIL--' => 'Demo Admin'))\n    \n    // Give it a body\n    ->setBody($feedback);\n\n// attach ScreenShot\nif(!empty($data)){\n    $attachment = Swift_Attachment::newInstance($data, 'ScreenShot.jpg', 'image/jpeg');\n    $message->attach($attachment);\n}\n\n$attachment = Swift_Attachment::newInstance(mb_convert_encoding(var_export($_SESSION, true), 'UTF-8'), 'Session.txt', 'text/plain');\n$message->attach($attachment);\n\n// Create the Transport\n$transport = Swift_SmtpTransport::newInstance('--SERVER--', 25)\n  ->setUsername('--USER--')\n  ->setPassword('--PASSWORD--');\n\n// Create the Mailer using your created Transport\n$mailer = Swift_Mailer::newInstance($transport);\n\n// Send the message\n$result = $mailer->send($message);\n\necho json_encode(array(\n    'success' => true,\n    'msg'     => ''\n));\n\n?>\n"]],"start1":0,"start2":0,"length1":0,"length2":1806}]],"length":1806}
{"contributors":[],"silentsave":false,"ts":1342035511025,"patch":[[{"diffs":[[0,"etBody($"],[1,"_SESSION['"],[0,"feedback"],[1,"']"],[0,");\n\n// a"]],"start1":1074,"start2":1074,"length1":24,"length2":36}]],"length":1818,"saved":false}
